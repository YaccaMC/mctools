name: Deploy Mctools

on:
  push:
    paths:
      - ".github/workflows/deploy.yml"
      - "src/main/**/*"
      - "build.gradle.kts"
      - "settings.gradle.kts"

jobs:
  deploy:
    name: Deploy Mctools To Maven Repository
    runs-on: 'ubuntu-latest'
    steps:
      - uses: actions/checkout@v3

      - uses: gradle/wrapper-validation-action@v1

      - uses: actions/setup-java@v3
        with:
          java-version: 21
          distribution: 'zulu'

      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2

      - name: Deploy release
        run: |
          chmod +x ./gradlew
          ./gradlew publish
        env:
          ORG_GRADLE_PROJECT_yaccaUsername: ${{ secrets.DEPLOY_USER }}
          ORG_GRADLE_PROJECT_yaccaPassword: ${{ secrets.DEPLOY_PASS }}
